{# Inclui o template principal nesta página #}
{% extends '_template.html' %}

{# Bloco com conteúdo desta página #}
{% block conteudo %}

<h2>Lista de Trecos</h2>

<div class="lista">

    {% for treco in trecos %}

    <div class="item">
        <a href="{{ treco.t_foto }}" target="_blank"><img src="{{ treco.t_foto }}" alt="{{ treco.t_nome }}"></a>
        <div>
            <a class="flutua-icone" href="/apaga/{{ treco.t_id }}" title="Apagar {{ treco.t_nome }}." onclick="return confirm('Term certeza que deseja apagar este treco?')">
                <i class="fa-regular fa-trash-can fa-fw"></i>
            </a>
            <a class="flutua-icone" href="/edita/{{ treco.t_id }}" title="Editar {{ treco.t_nome }}.">
                <i class="fa-solid fa-pen-to-square fa-fw"></i>
            </a>
            <h4>{{ treco.t_nome }}</h4>
            {{ treco.t_descricao }}
            <small>Local: {{ treco.t_localizacao }}</small>
        </div>
    </div>

    {% endfor %}

</div>

{% if acao == 'apagado' %}

<dialog id="myDialog">
    <h4>Oba!</h4>
    <p>Seu treco foi apagado com sucesso!</p>
    <form method="dialog">
        <button onclick="window.history.pushState({}, '', '/')">OK</button>
    </form>
</dialog>
<script>myDialog.showModal()</script>

{% endif %}

{% if acao == 'editado' %}

<dialog id="myDialog">
    <h4>Oba!</h4>
    <p>Seu treco foi editado com sucesso!</p>
    <form method="dialog">
        <button onclick="window.history.pushState({}, '', '/')">OK</button>
    </form>
</dialog>
<script>myDialog.showModal()</script>

{% endif %}

{% endblock %}